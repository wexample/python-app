#!/usr/bin/env bash
set -uo pipefail

CONFIG_FILE="/etc/wex.conf"

if [[ -f "$CONFIG_FILE" ]]; then
  source "$CONFIG_FILE"
else
  CORE_BIN="$(which wex)"
fi

SCRIPT_PATH="$("$CORE_BIN" app::shell/manager-path)"
HANDLER_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Forward to app-manager.sh
(
  cd "$HANDLER_DIR"
  source "$SCRIPT_PATH" "$@"
)
